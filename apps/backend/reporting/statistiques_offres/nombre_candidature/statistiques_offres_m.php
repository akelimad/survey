<div class='texte'><br/><br/><h1>STATISTIQUE OFFRE:</h1><p>Cette section vous permet d'afficher le nombre des candidatures pour chaque offre.</p>  <div  class="subscription" style="margin: 10px 0pt;">	<h1> NOMBRE DES CANDIDATURES </h1></div><table width="100%"><tr>                            <td width="25%"><b>Indicateur :</b></td>                            <td width="75%">                             <select onChange="window.location.href=this.value">                                <option value="<?= site_url('backend/reporting/statistiques_offres/nombre_offre/'); ?>"> Nombre des offres</option>                                <option value="<?= site_url('backend/reporting/statistiques_offres/offres_details/'); ?>"> Statistiques pour chaque offre</option>                                <option value="<?= site_url('backend/reporting/statistiques_offres/nombre_candidature/'); ?>"   selected  > Nombre des candidatures par offre</option>                                <option value="<?= site_url('backend/reporting/statistiques_offres/nombre_candidature_spontannee/'); ?>"> Nombre des candidatures spontanées</option>                                <option value="<?= site_url('backend/reporting/statistiques_offres/nombre_candidature_stage/'); ?>"> Nombre des candidatures pour stage</option>                            </select>                                                     </tr></table><br/><div class="ligneBleu"></div> <?php   $result = mysql_query("SELECT * FROM  candidature ");  $num_rows = mysql_num_rows($result);  $stylediv=($num_rows<1)?'style="visibility: collapse;height: 100px;"':'';  $msgdiv=($num_rows<1)?'Aucune donnée.':'';?>       <?php       if($num_rows < 1 ){       ?>                   <h3 style="  color: red;"> Nombre des candidatures par offre: <?php echo $num_rows; ?> </h3>     <?php } else {?>    <div <?php echo $stylediv; ?>>            <h3> Nombre des candidatures par offre <?php echo $num_rows; ?></h3>        <div id="visualization_de_candidatures_par_offre" style=" width: 100%; height: 100%;margin:30px auto;"></div>                <?php        $chartData = [          ['offre', 'Nombre des candidatures']        ];        $req1="SELECT *             FROM offre                        ".$q_ref_fili."            ORDER BY date_insertion DESC             LIMIT 0 , 30";                                            $reponse1 = mysql_query($req1);                 $tab;    $i=0; $ct = false;       while($donnee1=mysql_fetch_array($reponse1)  )       {       if($ct)       $i++;       if($i <30)       {         $r=$donnee1['id_offre'];        $req="SELECT  COUNT(*) AS 'nbre_offres'                                    FROM `candidature`                                     WHERE (candidature.id_offre  ='$r')                                   ";                 $reponse = mysql_query($req);               $iden=$donnee1['id_entreprise'];        $reqen="SELECT  *                                    FROM entreprise                                    WHERE id_entreprise ='$iden'                                  ";                 $reponseen = mysql_query($reqen);                   $donneen = mysql_fetch_array($reponseen);                        $donnee = mysql_fetch_array($reponse);    if($donnee['nbre_offres'] != 0)        {                    $chartData[] = [$donnee1['Name'], intval($donnee['nbre_offres'])];          // $tab[$i]=',[\''.$donnee1['Name'].'\','.$donnee['nbre_offres'].']';         // echo   $tab[$i];      $ct = true;     }     {     $ct = false;     }     }                       }         ?>          <!-- NOMBRES DE CANDIDATURES/OFFRES -->    <script type="text/javascript" src="https://www.google.com/jsapi"></script>  <script type="text/javascript">  google.load('visualization', '1', {packages: ['corechart', 'bar']});google.setOnLoadCallback(drawBasic);function drawBasic() {      var data = google.visualization.arrayToDataTable(<?= json_encode($chartData) ?>);var options = {        title: '',        chartArea: {width: '40%',height:'100%'},        fontSize: 10,        hAxis: {          title: 'Nombre des candidatures',          minValue: 0        },        vAxis: {          title: "Offres d'emploi"        }      };      var chart = new google.visualization.BarChart(document.getElementById('visualization_de_candidatures_par_offre'));      chart.draw(data, options);}    </script>    <?php } ?>  </div>