<div class='texte'><br/><br/><h1>STATISTIQUE OFFRE:</h1><p>Cette section vous permet d'afficher le nombre des offres sur le site.</p>             <div  class="subscription" style="margin: 10px 0pt;">				<h1> OFFRES D'EMPLOI </h1>			</div><table width="100%"><tr>                            <td width="25%"><b>Indicateur :</b></td>                            <td width="75%">                             <select onChange="window.location.href=this.value">                                <option value="<?= site_url('backend/reporting/statistiques_offres/nombre_offre/'); ?>" selected > Nombre des offres</option>                                <option value="<?= site_url('backend/reporting/statistiques_offres/offres_details/'); ?>" > Statistiques pour chaque offre</option>                                <option value="<?= site_url('backend/reporting/statistiques_offres/nombre_candidature/'); ?>"  > Nombre des candidatures par offre</option>                                <option value="<?= site_url('backend/reporting/statistiques_offres/nombre_candidature_spontannee/'); ?>"> Nombre des candidatures spontan√©es</option>                                <option value="<?= site_url('backend/reporting/statistiques_offres/nombre_candidature_stage/'); ?>"> Nombre des candidatures pour stage</option>                            </select>                                                     </tr></table> <br/><div class="ligneBleu"></div><?php    $today = date("Y-m-d"); /*$select_nbr = mysql_query("SELECT COUNT(id_offre) AS nbr FROM offre  WHERE date_insertion<>'0000-00-00' AND date_expiration<>'0000-00-00'  AND offre.date_expiration >= '$today'   and status = 'En cours' ".$q_ref_fili_and." ");*/$select_nbr = mysql_query("SELECT COUNT(id_offre) AS nbr FROM offre  WHERE date_insertion<>'0000-00-00' AND date_expiration<>'0000-00-00'  ".$q_ref_fili_and." ");$count_nbr = mysql_fetch_array($select_nbr); ?> <?php if($count_nbr['nbr'] < 1 ){ ?>             <h3 style="  color: red;"> Nombre des offres sur le site: <?php echo $count_nbr['nbr']; ?></h3>        <?php }else { ?>  <h3> Nombre des offres sur le site : <?php echo $count_nbr['nbr']; ?></h3>    <h3>                      <frame frameborder="0" width="680" height="300">                          <div id="visualization_Offres_par_semaine" style="width:680px; height: 300px;"></div>                      </frame>                                           </h3>                  <!-- NOMBRE D'ANNONCES PAR SEMAINE-->  <script type="text/javascript">         google.setOnLoadCallback(drawChart);      function drawChart() {        var data = new google.visualization.DataTable();        data.addColumn('date', 'Date');        data.addColumn('number', 'Nombre des offres sur le site');        data.addRows([      <?php        $debut = "2015-01-01";                list($Y,$m,$d)=explode('-',$debut);                $fin =(int) date("Y");                 for($i=$Y;$i<=$fin ;$i++)        {          for($j=0;$j<12 ;$j++)          {                       if($j==0 || $j==2 || $j==4 || $j==6 || $j==7 || $j==9 || $j==11)             $max = 30;          else            {              if($j==1)            {              if(isLeapYear($i))                $max = 28;              else               $max = 27;            }             else              {              $max = 29;            }            }                        for($k=1;$k<=$max && compareDate((int)date("Y"),((int)date("m")),(int)date("d"),(int)$i,(int)$j,(int)$k)!=2;$k++)           {                                   $a=$i;$m=$j;$d=$k;             if($m<10)             $m='0'.$m;              if($d<10)             $d='0'.$d;             $l=$a.'-'.$m.'-'.$d;                                   $sous_req="SELECT COUNT(id_offre) AS nbre FROM offre  WHERE date_insertion<>'0000-00-00' AND date_expiration<>'0000-00-00' AND date_expiration>='$l' AND date_insertion<='$l' AND status = 'En cours'  ".$q_ref_fili_and." ";                      $sous_rep = mysql_query($sous_req);                       while($dat = mysql_fetch_array($sous_rep))                        {                 echo '[new Date('.$a.','.($m-1).','.$d.'),'.$dat["nbre"].'],';                          }                    }                  }                  }              ?>        ]);        var chart = new google.visualization.AnnotatedTimeLine(document.getElementById('visualization_Offres_par_semaine'));        chart.draw(data, {displayAnnotations: true});      }    </script>     <!-- NOMBRE DE RECRUTEURS PAR SEMAINE -->    <script type="text/javascript">      google.load('visualization', '1', {'packages':['annotatedtimeline']});      google.setOnLoadCallback(drawChart);      function drawChart() {        var data = new google.visualization.DataTable();        data.addColumn('date', 'Date');        data.addColumn('number', 'nbres de recruteurs');        data.addRows([      <?php                  $debut = "2010-01-01";                list($Y,$m,$d)=explode('-',$debut);                $fin =(int) date("Y");                 for($i=$Y;$i<=$fin ;$i++)        {          for($j=0;$j<12 ;$j++)          {                       if($j==0 || $j==2 || $j==4 || $j==6 || $j==7 || $j==9 || $j==11)             $max = 30;          else            {              if($j==1)            {              if(isLeapYear($i))                $max = 28;              else               $max = 27;            }             else              {              $max = 29;            }            }                        for($k=1;$k<=$max && compareDate((int)date("Y"),((int)date("m"))-1,(int)date("d"),(int)$i,(int)$j,(int)$k)!=2;$k++)           {                                       $a=$i;$m=$j;$d=$k;            $l=$a.'-'.$m.'-'.$d;                $sous_req="SELECT COUNT(DISTINCT(id_entreprise)) AS nbre FROM entreprise WHERE date_abonnement<>'0000-00-00' AND date_expiration_compte<>'0000-00-00' AND date_expiration_compte>='$l' AND date_abonnement<='$l' AND date_expiration_compte<=CURDATE()";                $sous_rep = mysql_query($sous_req);                        while($dat = mysql_fetch_array($sous_rep))                        {                 echo '[new Date('.$a.','.($m).','.($d).'),'.$dat["nbre"].'],';                          }                 }        }               }                          ?>    ]);        var chart = new google.visualization.AnnotatedTimeLine(document.getElementById('visualization_Entreprises_par_semaine'));        chart.draw(data, {displayAnnotations: true});      }    </script>      <?php } ?></div>